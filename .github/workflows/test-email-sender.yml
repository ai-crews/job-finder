name: Send Email with Secrets

on: [push, pull_request]

jobs:
  send-email:
    runs-on: ubuntu-latest

    steps:
      - name: âœ… ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4

      - name: ğŸ Python 3.12 ì„¤ì¹˜
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'

      - name: ğŸ“¦ Poetry ì„¤ì¹˜
        run: pip install poetry

      - name: ğŸ“ ë””ë²„ê¹… - í˜„ì¬ ê²½ë¡œ í™•ì¸
        run: pwd

      - name: ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜
        working-directory: job-finder
        run: poetry install

      - name: ğŸ” GitHub Secretsë¥¼ .envë¡œ ì €ì¥
        working-directory: job-finder
        run: |
          echo "SENDER_EMAIL=${{ secrets.SENDER_EMAIL }}" >> .env
          echo "RECEIVER_EMAIL=${{ secrets.RECEIVER_EMAIL }}" >> .env
          echo "EMAIL_PW=${{ secrets.EMAIL_PW }}" >> .env

      - name: âœ‰ï¸ ì´ë©”ì¼ ë°œì†¡ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
        working-directory: job-finder
        run: poetry run python email_sender.py
