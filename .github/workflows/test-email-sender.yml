name: Email Sender Code Check

on: [push, pull_request]

jobs:
  test-email-script:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout 코드 받기
        uses: actions/checkout@v4

      - name: Python 3.12 설치
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'

      - name: Poetry 설치
        run: |
          pip install poetry

      - name: 패키지 설치
        run: |
          poetry install

      - name: 가짜 환경변수 설정 (.env 생성)
        run: |
          echo "SENDER_EMAIL=test@example.com" >> .env
          echo "RECEIVER_EMAIL=test@example.com" >> .env
          echo "EMAIL_PW=dummy_password" >> .env

      - name: email_sender.py 실행 확인
        run: |
          python email_sender.py || echo "에러 무시하고 코드 실행만 확인"
